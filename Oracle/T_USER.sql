/*
 Navicat Oracle Dump SQL

 Source Server         : wangrui
 Source Server Type    : Oracle
 Source Server Version : 120200 (Oracle Database 12c Enterprise Edition Release 12.2.0.1.0 - 64bit Production)
 Source Host           : 39.106.9.202:1521
 Source Schema         : ADMIN1

 Target Server Type    : Oracle
 Target Server Version : 120200 (Oracle Database 12c Enterprise Edition Release 12.2.0.1.0 - 64bit Production)
 File Encoding         : 65001

 Date: 18/04/2025 18:01:52
*/


-- ----------------------------
-- Table structure for T_USER
-- ----------------------------
DROP TABLE "ADMIN1"."T_USER";
CREATE TABLE "ADMIN1"."T_USER" (
  "USERID" NUMBER VISIBLE NOT NULL,
  "USERNAME" VARCHAR2(254 BYTE) VISIBLE NOT NULL,
  "USERPASSWORD" VARCHAR2(254 BYTE) VISIBLE NOT NULL,
  "ISADMIN" NUMBER VISIBLE NOT NULL
)
LOGGING
NOCOMPRESS
PCTFREE 10
INITRANS 1
STORAGE (
  INITIAL 65536 
  NEXT 1048576 
  MINEXTENTS 1
  MAXEXTENTS 2147483645
  BUFFER_POOL DEFAULT
)
PARALLEL 1
NOCACHE
DISABLE ROW MOVEMENT
;

-- ----------------------------
-- Records of T_USER
-- ----------------------------
INSERT INTO "ADMIN1"."T_USER" ("USERID", "USERNAME", "USERPASSWORD", "ISADMIN") VALUES ('1', 'wangrui', '123456', '0');
INSERT INTO "ADMIN1"."T_USER" ("USERID", "USERNAME", "USERPASSWORD", "ISADMIN") VALUES ('2', 'lizhangyue', '123456', '0');
INSERT INTO "ADMIN1"."T_USER" ("USERID", "USERNAME", "USERPASSWORD", "ISADMIN") VALUES ('3', 'liuxiangxiang', '123456', '0');
INSERT INTO "ADMIN1"."T_USER" ("USERID", "USERNAME", "USERPASSWORD", "ISADMIN") VALUES ('0', 'root', '123456', '1');
COMMIT;
COMMIT;

-- ----------------------------
-- Primary Key structure for table T_USER
-- ----------------------------
ALTER TABLE "ADMIN1"."T_USER" ADD CONSTRAINT "SYS_C0011108" PRIMARY KEY ("USERID");

-- ----------------------------
-- Checks structure for table T_USER
-- ----------------------------
ALTER TABLE "ADMIN1"."T_USER" ADD CONSTRAINT "SYS_C0011105" CHECK ("USERNAME" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "ADMIN1"."T_USER" ADD CONSTRAINT "SYS_C0011106" CHECK ("USERPASSWORD" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "ADMIN1"."T_USER" ADD CONSTRAINT "SYS_C0011107" CHECK ("ISADMIN" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "ADMIN1"."T_USER" ADD CONSTRAINT "SYS_C0011620" CHECK ("USERID" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "ADMIN1"."T_USER" ADD CONSTRAINT "SYS_C0011621" CHECK ("USERNAME" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "ADMIN1"."T_USER" ADD CONSTRAINT "SYS_C0011622" CHECK ("USERPASSWORD" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "ADMIN1"."T_USER" ADD CONSTRAINT "SYS_C0011623" CHECK ("ISADMIN" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;

-- ----------------------------
-- Triggers structure for table T_USER
-- ----------------------------
CREATE TRIGGER "ADMIN1"."t_user_trig" BEFORE INSERT ON "ADMIN1"."T_USER" REFERENCING OLD AS "OLD" NEW AS "NEW" FOR EACH ROW 
DECLARE
BEGIN
    -- 检查USERID是否已设置（例如手动设置为0的超级管理员），如果未设置则分配序列下一个值
    IF :new.userid IS NULL THEN
        SELECT seq_t_user.nextval INTO :new.userid FROM dual;
    END IF;
END t_user_trig;
/
